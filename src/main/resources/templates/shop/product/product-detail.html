<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/default">
<th:layout layout:fragment="main">
	<section>
		<form id="productForm" th:object="${product}" method="post" th:action="@{/cart/addCart}" onsubmit="return insCart(this)">
			<input type="hidden" name="i_product" id="i_product" th:value="${product.i_product}">

			<div>
				<a th:href="@{/admin/pd-regmod( i_pd=${product.i_product} )}" class="button">수정</a>
				<a th:href="@{/admin/prduct/del}" class="button">삭제</a>
			</div>
			<!-- 상품소개 상단바 -->
			<div class="row uniform">
				<!-- 상품 대표 사진 -->
				<div style="float: left;">
					<p>
						<span class="image fit">
							<img src="images/pic01.jpg">
						</span>
					</p>
				</div>
				<!-- 상세정보 영역 -->
				<div class>
					<!-- 상품명, 설명 -->
					<div>
						<p style="font-size: 17px;" th:text="*{p_nm}"></p>
					</div>
					<!-- 상품 가격 -->
					<div th:text="*{price}"></div>
					<!-- 상품 수량 -->
					<div>
						<p>최소주문수량 1개 이상</p>
						<div>
							<table>
								<tr>
									<th>상품명</th>
									<th>수량</th>
									<th>가격</th>
								</tr>
								<tr>
									<td th:text="*{p_nm}">상품명은 커피</td>
									<td>
										<span>
											<!--상품 수량-->
											<input th:value="*{count}" type="number" min="1" class="countBox" name="count" id="count" style="height: 25px; padding: 0 2px 0 3px; line-height: 25px; border: 1px solid #d4d8d9; border-radius: 3px 0 0 3px;">
											<input type="hidden" th:value="*{stock}" class="stock_hidden">
											<script type="text/javascript" th:src="@{/js/stockBtn.js}"></script>
										</span>
									</td>
									<td th:text="*{price}" pattern="###,###,###"></td>
								</tr>
								<tr>
									<td colspan="3">
										<span>총 상품금액(수량):</span>
										<span>
											<strong>
												<em>13,000원</em>
											</strong>
											(1개)
										</span>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- 구매, 장바구니 영역 -->
					<div>
						<span>
							<!-- 구매, 왼쪽 -->
							<a th:href="@{/member/order}" class="button primary">BUY</a>
							<!-- 장바구니, 오른쪽 -->
							<button type="submit" class="button addCart">CART</button>
						</span>
					</div>
				</div>
			</div>
		</form>
		<!-- 상품 사진, 자세한 설명 등 -->
		<div>
			<p th:text="*{product.p_description}"></p>
			<div th:if="${not #lists.isEmpty( fileList )}" th:each="row : ${fileList}">
				<span class="image fit">
					<img th:src="${row.img_url}" alt="">
				</span>
			</div>
			<img src="/img/210330/ed426770ba9b4115831d3aff6e5ec345.jpg">
		</div>
	</section>
</th:layout>

<th:block layout:fragment="script">
	<script th:inline="javascript">
		/*<![CDATA[*/

		function insCart(form) {

			var result = (
					isValid(form.i_product, "상품번호", null, null)
					&& isValid(form.count, "수량", null, null)
			);

			if ( result == false ) {
				return false;
			}

			var idx = /*[[ ${board.i_cart} ]]*/;
			if (isEmpty(i_cart) == false) {
				var queryString = /*[[ ${param.makeQueryString(param.currentPageNo)} ]]*/;

				/*[- 쿼리 스트링을 오브젝트 형태로 변환 -]*/
				queryString = new URLSearchParams(queryString);
				queryString.forEach(function(value, key) {
					if (isEmpty(value) == false) {
						$(form).append('<input type="hidden" name="' + key + '" value="' + value + '" />');
					}
				});
			}
		}

		/*]]>*/

	</script>
</th:block>
</html>